// converter.js: Converts a u32 array vector to its u64 hexadecimal equivalent and vice versa

function trim(string, size) {
    return string.substring(string.length - size, string.length);
}

function toDec(hex_input) {
    var dec = [];
    for (var i = 1; i < hex_input.length; i++) {
        var aux = hex_input[i].split(" ");
        dec.push(parseInt(aux[0], 16));
        dec.push(parseInt(aux[1], 16));
        dec.push(parseInt(aux[2], 16));
        dec.push(parseInt(aux[3], 16));
    }
    return dec;
}

function toHex(input) {
    const zeroes64 = "0000000000000000000000000000000000000000000000000000000000000000";
    var hex_len = zeroes64 + ((input.length)/4).toString(16);
    hex_len = trim(hex_len, 64);
    var hex = [hex_len];

    for (var i = 0; i < input.length; i++) {
        const zeroes16 = "0000000000000000";
        var entry = trim(zeroes16 + input[i].toString(16), 16);
        hex.push(entry);
    }
    return hex;
}

function format(hex_input) {
    var output = [hex_input[0]];
    for (var i = 1; i < hex_input.length; i+=4) {
        var node = hex_input[i] + " " + hex_input[i+1] + " " +
                    hex_input[i+2] + " " + hex_input[i+3];
        output.push(node);
    }
    return output;
}



// Example input variables
var input = [6, 2, 1, 4, 10, 116, 0, 1, 12, 34, 4, 1, 8, 29, 16, 1, 14, 25, 20, 1, 18, 28, 26, 1, 30, 17, 22, 1, 21, 13, 24, 1, 36, 82, 9, 1, 32, 44, 40, 1, 38, 77, 74, 1, 37, 72, 48, 2, 46, 64, 68, 2, 60, 76, 56, 2, 54, 58, 57, 0, 52, 69, 66, 1, 49, 70, 62, 1, 50, 61, 65, 1, 45, 78, 42, 1, 53, 41, 73, 1, 84, 104, 33, 1, 80, 100, 88, 1, 86, 97, 92, 1, 90, 101, 98, 1, 102, 89, 94, 1, 85, 93, 96, 1, 81, 110, 108, 1, 106, 112, 105, 1, 109, 114, 113, 0, 5, 120, 124, 1, 117, 122, 121, 0, 118, 126, 125, 1];

var input2 = [20, 2, 1, 4, 16, 116, 0, 1, 12, 34, 4, 1, 8, 29, 16, 1, 4, 25, 20, 1, 0, 28, 26, 1, 30, 116, 22, 1, 21, 40, 24, 1, 36, 82, 29, 1, 32, 44, 40, 1, 29, 172, 180, 1, 176, 182, 94, 2, 92, 150, 65, 2, 66, 156, 62, 2, 60, 58, 57, 0, 56, 112, 54, 1, 148, 50, 52, 1, 88, 128, 65, 1, 140, 53, 42, 1, 132, 41, 73, 1, 84, 104, 44, 1, 80, 100, 88, 1, 68, 146, 50, 1, 48, 94, 93, 1, 108, 136, 94, 1, 104, 93, 96, 1, 100, 110, 108, 1, 96, 112, 93, 1, 61, 114, 113, 0, 25, 120, 124, 1, 117, 122, 121, 0, 118, 126, 125, 1, 168, 174, 114, 2, 76, 129, 53, 1, 152, 158, 144, 2, 72, 156, 45, 1, 160, 166, 128, 2, 64, 164, 49, 1, 136, 157, 160, 2, 53, 158, 157, 0, 144, 165, 168, 2, 149, 166, 165, 0, 128, 173, 113, 2, 41, 174, 173, 0, 44, 181, 93, 2, 42, 182, 181, 1];

var hex_input = ["0000000000000000000000000000000000000000000000000000000000000011", // size
 "0000000000000004 0000000000000001 0000000000000019 0000000000000001", // node 0
 "0000000000000000 000000000000000C 0000000000000008 0000000000000001", // node 1
 "0000000000000006 0000000000000010 0000000000000014 0000000000000002", // node 2
 "0000000000000005 0000000000000011 0000000000000016 0000000000000001", // node 3
 "0000000000000009 000000000000000D 0000000000000015 0000000000000001", // node 4
 "000000000000000A 0000000000000012 000000000000000E 0000000000000001", // node 5
 "000000000000001C 0000000000000002 0000000000000030 0000000000000001", // node 6
 "0000000000000018 0000000000000024 0000000000000020 0000000000000001", // node 7
 "000000000000001E 0000000000000028 000000000000002C 0000000000000003", // node 8
 "000000000000001D 0000000000000029 000000000000002E 0000000000000001", // node 9
 "0000000000000021 0000000000000025 000000000000002D 0000000000000001", // node 10
 "0000000000000022 000000000000002A 0000000000000026 0000000000000001", // node 11
 "000000000000001A 0000000000000038 0000000000000034 0000000000000001", // node 12
 "0000000000000032 000000000000003C 0000000000000040 0000000000000004", // node 13
 "0000000000000031 000000000000003D 0000000000000042 0000000000000001", // node 14
 "0000000000000035 0000000000000039 0000000000000041 0000000000000001", // node 15
 "0000000000000036 000000000000003E 000000000000003A 0000000000000001", // node 16
];


// Convert
var dec = toDec(hex_input);
var hex = format(toHex(input));
console.log(hex, hex.length);
console.log(dec, dec.length);
